<div class="container">
  <div class="row d-flex justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-lg rounded-4">
        <div class="card-body p-4">
          <h3 class="text-center mb-4 text-main">Update User Password</h3>

          <!-- Error Message -->
          <div *ngIf="responseErrorMessage" class="alert alert-danger pb-0 px-2 text-danger">
            <p>{{ responseErrorMessage }}</p>
          </div>

          <!-- Form -->
         <form #updateUserPasswordForm="ngForm" (ngSubmit)="onSubmit(updateUserPasswordForm)">

            <!-- Current Password -->
            <div class="mb-3">
              <label for="currentPassword" class="form-label">Current Password</label>
              <input
                #currentPassword="ngModel"
                ngModel
                name="currentPassword"
                class="form-control"
                type="password"
                id="currentPassword"
                required
                minlength="6"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}"
              />
              <div *ngIf="currentPassword.touched && currentPassword.invalid" class="text-danger small mt-1">
                <div *ngIf="currentPassword.errors?.['required']">Current password is required.</div>
                <div *ngIf="currentPassword.errors?.['minlength']">Must be at least 6 characters.</div>
                <div *ngIf="currentPassword.errors?.['pattern']">
                  Must contain uppercase, lowercase, and a number.
                </div>
              </div>
            </div>

            <!-- New Password -->
            <div class="mb-3">
              <label for="newPassword" class="form-label">New Password</label>
              <input
                #newPassword="ngModel"
                ngModel
                name="newPassword"
                class="form-control"
                type="password"
                id="newPassword"
                required
                minlength="6"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}"
              />
              <div *ngIf="newPassword.touched && newPassword.invalid" class="text-danger small mt-1">
                <div *ngIf="newPassword.errors?.['required']">New password is required.</div>
                <div *ngIf="newPassword.errors?.['minlength']">Must be at least 6 characters.</div>
                <div *ngIf="newPassword.errors?.['pattern']">
                  Must contain uppercase, lowercase, and a number.
                </div>
              </div>
            </div>

            <!-- Confirm Password -->
            <div class="mb-3">
              <label for="rePassword" class="form-label">Confirm New Password</label>
              <input
                #rePassword="ngModel"
                ngModel
                name="rePassword"
                class="form-control"
                type="password"
                id="rePassword"
                required
                minlength="6"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}"
              />
              <div *ngIf="rePassword.touched && rePassword.invalid" class="text-danger small mt-1">
                <div *ngIf="rePassword.errors?.['required']">Please confirm your new password.</div>
                <div *ngIf="rePassword.errors?.['minlength']">Must be at least 6 characters.</div>
                <div *ngIf="rePassword.errors?.['pattern']">
                  Must contain uppercase, lowercase, and a number.
                </div>
              </div>

              <div
                *ngIf="
                  rePassword.touched &&
                  !rePassword.errors &&
                  rePassword.value !== newPassword.value
                "
                class="text-danger small mt-1"
              >
                Passwords do not match.
              </div>
            </div>

            <!-- Submit Button -->
            <div class="d-flex justify-content-center">
              <button
                [disabled]="updateUserPasswordForm.invalid || rePassword.value !== newPassword.value"
                type="submit"
                class="btn border-dark-subtle submit-btn"
              >
                <span *ngIf="!isLoading">Update Password</span>
                <span *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></span>
              </button>
            </div>
          </form>
          <!-- End Form -->
        </div>
      </div>
    </div>
  </div>
</div>
